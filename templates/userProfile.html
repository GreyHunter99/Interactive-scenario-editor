{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}
    {% if isAdmin %}
        <p><a href="{{ url_for('users') }}">Lista użytkowników</a></p>
    {% endif %}
    <div class="board">
    {% if usernameTaken %}
        <h2>Nazwa użytkownika zajęta</h2>
    {% endif %}
    {% if isProfileOwner or isAdmin %}
        <form action="{{ url_for('userProfile', userId=userData['id']) }}" method="post">
            <h1>Nazwa użytkownika:</h1><p><input name='username' type="text" required="required" value="{{ userData['username'] }}"></p>
            <h1>Opis profilu:</h1><p><input name='description' type="text" value="{{ userData['description'] }}"></p>
            <p><input type="submit" value="Zatwierdź zmiany"></p>
        </form>
    {% else %}
        <h1>Nazwa użytkownika: {{ userData['username'] }}</h1>
        {% if userData['description'] != '' %}
            <h1>Opis profilu:</h1>
            <h3>{{ userData['description'] }}</h3>
        {% endif %}
    {% endif %}
    {% if isProfileOwner or isAdmin %}
        <p><a href="{{ url_for('changePassword', userId=userData['id']) }}">Zmień hasło</a></p>
    {% endif %}
    {% if isAdmin and not isProfileOwner %}
        <p><a href="{{ url_for('grantAdmin', userId=userData['id']) }}">{% if userData['isAdmin'] %}Odbierz uprawnienia admina{% else %}Nadaj uprawnienia admina{% endif %}</a></p>
    {% endif %}
    {% if isProfileOwner or isAdmin %}
        <p><a class="deleteButton" href="{{ url_for('deleteUser', userId=userData['id']) }}">Usuń konto</a></p>
    {% endif %}
    </div>
    <div class="board">
    {% if isProfileOwner or isAdmin %}
        <p><a href="{{ url_for('editScenario', userId=userData['id']) }}">Stwórz scenariusz</a></p>
    {% endif %}
        <h1>Scenariusze użytkownika:</h1>
        {% if userScenarioList['privateScenarios'] and (isProfileOwner or isAdmin) %}
            <h2>Scenariusze prywatne:</h2>
        {% endif %}
        {% for key in userScenarioList['privateScenarios'] %}
            {% if isProfileOwner or isAdmin %}
                <p><a href="{{ url_for('start', scenarioId=key) }}">{{ userScenarioList['privateScenarios'][key] }}</a>
                    <a href="{{ url_for('editScenario', scenarioId=key) }}">Edycja</a>
                    <a class="deleteButton" href="{{ url_for('deleteScenario', scenarioId=key) }}">Usuń</a>
                </p>
            {% endif %}
        {% endfor %}
        {% if userScenarioList['publicScenarios'] %}
            <h2>Scenariusze publiczne bez możliwości edycji:</h2>
        {% endif %}
        {% for key in userScenarioList['publicScenarios'] %}
            <p><a href="{{ url_for('start', scenarioId=key) }}">{{ userScenarioList['publicScenarios'][key] }}</a>
                {% if isProfileOwner or isAdmin %}
                    <a href="{{ url_for('editScenario', scenarioId=key) }}">Edycja</a>
                    <a class="deleteButton" href="{{ url_for('deleteScenario', scenarioId=key) }}">Usuń</a>
                {% endif %}
            </p>
        {% endfor %}
        {% if userScenarioList['publicEditScenarios'] %}
            <h2>Scenariusze publiczne z możliwością edycji:</h2>
        {% endif %}
        {% for key in userScenarioList['publicEditScenarios'] %}
            <p><a href="{{ url_for('start', scenarioId=key) }}">{{ userScenarioList['publicEditScenarios'][key] }}</a>
                {% if session.get('userId') %}
                    <a href="{{ url_for('editScenario', scenarioId=key) }}">Edycja</a>
                {% endif %}
                {% if isProfileOwner or isAdmin %}
                    <a class="deleteButton" href="{{ url_for('deleteScenario', scenarioId=key) }}">Usuń</a>
                {% endif %}
            </p>
        {% endfor %}
    </div>
{% endblock %}